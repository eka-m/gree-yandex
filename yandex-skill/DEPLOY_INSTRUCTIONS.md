# ðŸš€ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð¿Ð¾ Ð´ÐµÐ¿Ð»Ð¾ÑŽ

## âœ… Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð²Ð½ÐµÑÐµÐ½Ñ‹

### 1. Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ñ‹ endpoints ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¯Ð½Ð´ÐµÐºÑ:
- âœ… `/v1.0/user/devices` - Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½ Ñ GET Ð½Ð° POST
- âœ… `/v1.0/user/devices/unlink` - Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½ Ð¿ÑƒÑ‚ÑŒ
- âœ… Ð’ÑÐµ endpoints Ñ‚ÐµÐ¿ÐµÑ€ÑŒ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‚ Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸

### 2. ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ OAuth Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸:
- âœ… Client ID: `1c2c42c5c0d34e25b4ed2b9e8393fa7f`
- âœ… Client Secret: `3a558ad9c9084bd99cca4114b3ee64e5`
- âœ… Redirect URI: `https://gree.thequark.dev/oauth/callback`

## ðŸ“‹ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð´Ð»Ñ Ð¯Ð½Ð´ÐµÐºÑ Developer Console

### OAuth Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ (Ñ€Ð°Ð·Ð´ÐµÐ» "Ð¡Ð²ÑÐ·ÐºÐ° Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð¾Ð²"):
- **Ð˜Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ:** `1c2c42c5c0d34e25b4ed2b9e8393fa7f`
- **Ð¡ÐµÐºÑ€ÐµÑ‚ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ:** `3a558ad9c9084bd99cca4114b3ee64e5`
- **URL Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸:** `https://gree.thequark.dev/oauth/authorize`
- **URL Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ñ‚Ð¾ÐºÐµÐ½Ð°:** `https://gree.thequark.dev/oauth/token`
- **URL Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚Ð¾ÐºÐµÐ½Ð°:** `https://gree.thequark.dev/oauth/token`
- **Ð˜Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹:** `home:read home:write`

### Backend Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸:
- **Endpoint URL:** `https://gree.thequark.dev/v1.0`

## ðŸ”§ ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð´Ð»Ñ Ð´ÐµÐ¿Ð»Ð¾Ñ

```bash
# 1. ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ
ssh root@46.202.155.247

# 2. ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð² Ð¿Ð°Ð¿ÐºÑƒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
cd /gopanel/sites/gree/yandex-skill

# 3. ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ
pm2 stop gree-smart-home
pm2 delete gree-smart-home

# 4. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ .env Ñ„Ð°Ð¹Ð»
cat > .env << 'EOF'
NODE_ENV=production
PORT=3002
HVAC_SERVER_URL=http://localhost:3001
YANDEX_SKILL_ID=1c2c42c5c0d34e25b4ed2b9e8393fa7f
YANDEX_CLIENT_ID=1c2c42c5c0d34e25b4ed2b9e8393fa7f
YANDEX_CLIENT_SECRET=3a558ad9c9084bd99cca4114b3ee64e5
REDIRECT_URI=https://gree.thequark.dev/oauth/callback
EOF

# 5. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²ÐµÑ€
pm2 start main.js --name "gree-smart-home" --watch

# 6. Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
pm2 save

# 7. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ
pm2 status
```

## ðŸ§ª Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

ÐŸÐ¾ÑÐ»Ðµ Ð´ÐµÐ¿Ð»Ð¾Ñ Ð¿Ñ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ endpoints:

```bash
# Health check
curl https://gree.thequark.dev/

# OAuth authorize
curl -I "https://gree.thequark.dev/oauth/authorize?state=test"

# Smart Home API (POST Ð·Ð°Ð¿Ñ€Ð¾Ñ)
curl -X POST https://gree.thequark.dev/v1.0/user/devices \
  -H "Authorization: Bearer test-token" \
  -H "X-Request-Id: test-123" \
  -H "Content-Type: application/json" \
  -d '{}'
```

## ðŸŽ¯ ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚

ÐŸÐ¾ÑÐ»Ðµ Ð´ÐµÐ¿Ð»Ð¾Ñ:
- âœ… Ð’ÑÐµ endpoints Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ñ‚ÑŒ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾
- âœ… OAuth Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð´Ð¾Ð»Ð¶Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ
- âœ… ÐžÑˆÐ¸Ð±ÐºÐ° "Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ" Ð´Ð¾Ð»Ð¶Ð½Ð° Ð¸ÑÑ‡ÐµÐ·Ð½ÑƒÑ‚ÑŒ
- âœ… ÐŸÑ€Ð¸Ð²ÑÐ·ÐºÐ° Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð° Ð² Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸ "Ð”Ð¾Ð¼ Ñ ÐÐ»Ð¸ÑÐ¾Ð¹" Ð´Ð¾Ð»Ð¶Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ 